(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[381],{3742:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/solar-system/components/progress/Progress",function(){return n(2750)}])},8033:function(t,e,n){"use strict";n.r(e),n.d(e,{FramePreview:function(){return u}});var i=n(7297),r=n(8458);function o(){let t=(0,i.Z)(["\n  width: 100px;\n  position: absolute;\n  bottom: 24px;\n\n  background-color: lightgray;\n\n  border: 1px solid lightgray;\n  box-sizing: border-box;\n\n  left: 0;\n\n  display: block;\n\n  overflow: hidden;\n  border-radius: 4px;\n\n  visibility: hidden;\n\n  padding: 0;\n  margin: 0;\n\n"]);return o=function(){return t},t}let u=r.ZP.video(o());e.default=u},2750:function(t,e,n){"use strict";n.r(e),n.d(e,{Progress:function(){return d}});var i=n(5893),r=n(7294),o=n(5522),u=n(6104),s=n(7125),l=n(8033),a=n(7149);let c=new a.GesturesController,d=t=>{let{controller:e}=t,n=(0,r.useRef)(null),a=(0,r.useRef)(null),d=(0,r.useRef)(null),[h,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{a.current&&f(new u.RectangleController(a.current))},[]);let g=(0,r.useCallback)(()=>{let t=n.current;if(t){let i=(null==e?void 0:e.getPlayingProgress())||0,r=null==e?void 0:e.getDuration();r&&(t.style.width="".concat(100/r*i,"%"))}},[e]),p=(0,r.useCallback)(async()=>{let t=()=>{(null==e?void 0:e.getPlayingState())==="playing"&&(g(),window.requestAnimationFrame(t))};window.requestAnimationFrame(t)},[e,g]);(0,r.useEffect)(()=>{e&&e.subscribe("playingState",p)},[e,p]);let b=(0,r.useCallback)(t=>{if(h&&e){let n=(0,s.calculateCurrentTimeByCursorPosition)(h,t,e.getDuration());e.seek(n),"playing"!==e.getPlayingState()&&window.requestAnimationFrame(g)}},[e,h,g]),w=(0,r.useCallback)(t=>{c.getTouchStarted()||b(t.clientX)},[b]),m=(0,r.useCallback)(t=>{let e=d.current,n=()=>{if(h&&e){let n=(0,s.calculateCursorPosition)(h,t),i=(0,s.calculateCurrentTimeByCursorPosition)(h,t,e.duration||0),r=h.getLeftPadding();e.currentTime=i,e.style.left="".concat(n-50+r,"px")}};window.requestAnimationFrame(n)},[h]),P=(0,r.useCallback)(t=>{c.getTouchStarted()||m(t.clientX)},[m]),C=(0,r.useCallback)(()=>{let t=d.current;t&&(d.current.style.visibility="initial")},[]),v=(0,r.useCallback)(()=>{let t=d.current;t&&(d.current.style.visibility="hidden")},[]),x=(0,r.useCallback)(t=>{if(1===t.touches.length){let e=t.touches[0],n=e.clientX;c.setLastFingerPosition(n),m(n)}},[m]),y=(0,r.useCallback)(t=>{if(c.touch(),1===t.touches.length){let e=t.touches[0],n=e.clientX;c.setLastFingerPosition(n)}C()},[C]),k=(0,r.useCallback)(()=>{c.touchEnd(),b(c.getLastFingerPosition()),v()},[v,b]);return(0,i.jsxs)(o.StripValueWrapper,{onMouseMove:P,onClick:w,onMouseEnter:C,onMouseLeave:v,onTouchStart:y,onTouchEnd:k,onTouchCancel:k,onTouchMove:x,children:[(0,i.jsx)(o.StripValue,{ref:n}),(0,i.jsx)(o.StripValuePlaceholder,{ref:a}),(0,i.jsx)(l.FramePreview,{preload:"metadata",src:null==e?void 0:e.getVideoSrc(),ref:d})]})};e.default=d},7125:function(t,e,n){"use strict";n.r(e),n.d(e,{calculateCurrentTimeByCursorPosition:function(){return o},calculateCursorPosition:function(){return i},calculateCursorPositionInPercents:function(){return r}});let i=(t,e)=>{let n=t.getLeftOffset();return e-n},r=(t,e)=>{let n=100/t.getWidth();return n*i(t,e)},o=(t,e,n)=>{let i=r(t,e)/100;return Math.min(n*i,n)};e.default=i},7149:function(t,e,n){"use strict";n.r(e),n.d(e,{GesturesController:function(){return i}});class i{touch(){window.clearTimeout(this.timeoutId),this.touchStarted=!0}touchEnd(){this.timeoutId=window.setTimeout(()=>{this.touchStarted=!1},300)}getTouchStarted(){return this.touchStarted}setLastFingerPosition(t){this.lastFingerPositionX=t}getLastFingerPosition(){return this.lastFingerPositionX}constructor(){this.touchStarted=!1,this.lastFingerPositionX=0,this.timeoutId=0}}e.default=i},6104:function(t,e,n){"use strict";n.r(e),n.d(e,{RectangleController:function(){return i}});class i{getWidth(){return this.width}getLeftOffset(){return this.left}getLeftPadding(){return this.leftPadding}dispose(){window.removeEventListener("resize",this.boundUpdate)}update(){let t=this.element.getBoundingClientRect();this.leftPadding=this.element.offsetLeft,this.width=t.width,this.left=t.left}constructor(t){this.width=0,this.left=0,this.leftPadding=0,this.element=t,this.boundUpdate=this.update.bind(this),window.addEventListener("resize",this.boundUpdate),this.boundUpdate()}}e.default=i},5522:function(t,e,n){"use strict";n.r(e),n.d(e,{StripValue:function(){return l},StripValuePlaceholder:function(){return a},StripValueWrapper:function(){return c}});var i=n(7297),r=n(8458);function o(){let t=(0,i.Z)(["\n  width: 0%;\n  height: 4px;\n  border-radius: 1px;\n  background-color: white;\n  overflow: hidden;\n  cursor: pointer;\n  z-index: 1;\n  transition: transform ease-out 200ms;\n"]);return o=function(){return t},t}function u(){let t=(0,i.Z)(["\n  height: 4px;\n  border-radius: 1px;\n  background-color: gray;\n  position: absolute;\n  z-index: 0;\n  width: calc(100% - 16px);\n  cursor: pointer;\n  transition: transform ease-out 200ms;\n\n"]);return u=function(){return t},t}function s(){let t=(0,i.Z)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  flex-shrink: 1;\n  padding: 0 8px;\n  width: 100%;\n  position: relative;\n\n  &:hover {\n    "," {\n      transform: scaleY(2);\n    }\n\n    "," {\n      transform: scaleY(2);\n    }\n  }\n"]);return s=function(){return t},t}let l=r.ZP.div(o()),a=r.ZP.div(u()),c=r.ZP.div(s(),a,l);e.default=l}},function(t){t.O(0,[578,774,888,179],function(){return t(t.s=3742)}),_N_E=t.O()}]);